# AlmaLinux 10 Kickstart Configuration
text
lang en_US.UTF-8
keyboard us
timezone Australia/Brisbane --utc

# Network - DHCP on first available device
network --bootproto=dhcp --device=link --activate --onboot=yes

# Root password
rootpw --plaintext changeme

# Disk partitioning
zerombr
clearpart --all --initlabel
autopart --type=lvm

# Bootloader
bootloader --location=mbr --append="console=ttyS0,115200n8"

# Packages
%packages
@^minimal-environment
openssh-server
NetworkManager
-firewalld
%end

# Post-installation
%post
# Configure SSH
sed -i 's/^#\?PermitRootLogin.*/PermitRootLogin yes/' /etc/ssh/sshd_config
sed -i 's/^#\?PasswordAuthentication.*/PasswordAuthentication yes/' /etc/ssh/sshd_config

# Enable services
systemctl enable sshd
systemctl enable NetworkManager

# Write confirmation
echo "Kickstart installation completed" > /root/install-complete.txt
%end

# Reboot
reboot --eject